Review the critical database integrity issue discovered during comprehensive inspection. **CRITICAL FINDING:** 12 Room entities exist in the codebase but are NOT registered in AppDatabase's @Database annotation. This will cause runtime crashes when any DAO tries to access these tables. **Missing Entity Registrations:** 1. ActionSequence.class 2. FeedbackRecord.class 3. Game.class 4. GameConfig.class (has FK to Game) 5. GameProfile.class (has FK to Game) 6. Settings.class 7. Strategy.class 8. TrainingData.class 9. UserFeedback.class 10. UserProfile.class 11. PerformanceLog.class 12. PerformanceMetric.class **Currently Registered (13 entities):** AIAction, CallerProfile, GameState, GestureSampleEntity, ImageSampleEntity, LabelDefinitionEntity, ModelInfoEntity, ScheduledTask, ScreenActionEntity, Task, TouchPath, UIElement, VoiceSampleEntity **Questions for Architect:** 1. Should ALL 12 entities be added to AppDatabase registration? 2. Are there any foreign key dependencies to consider (GameConfig/GameProfile both reference Game)? 3. Should database version be incremented from 4 to 5? 4. Is fallbackToDestructiveMigration() still acceptable or should we create proper migration? 5. Are there any DAO classes for these entities that also need verification? **Impact Assessment:** - Any code accessing these entities via DAOs will crash - Database queries involving these tables will fail - This affects gaming features, user feedback, training data, and settings management Provide guidance on the proper fix approach and any architectural concerns.
Summarizing Room entities integration planâ€¦
I'll report a clear plan to register all 12 missing Room entities in AppDatabase, increment the schema to version 5 with an explicit migration to avoid destructive fallback, and verify all DAO classes exist and align with entities. I'll analyze foreign keys, TypeConverters usage, migration risks, and concurrency concerns, then outline next steps including inventorying entities and DAOs, updating the database class, defining migration scripts, testing thoroughly, and reconsidering fallback strategies to ensure a robust release.